<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Colorsudoku</title>
    <link rel="stylesheet" href="/css/stylesheet.css"/>
<!--    <script src="jquery-3.5.1.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>
<body>
<!--/*@thymesVar id="userController" type="sk.tuke.colorsudoku.server.controller.UserController"*/-->

<div th:replace="fragments::header"/>

<span id="register">
    <form class="myForm" action="/reg" name="myForm" method="post">
        <label class="labels" for="inputUsername">Username:</label> <input class="inputs" id="inputUsername" type="text" name="username" placeholder="Add username"/><br/>
        <label class="labels" for="inputUsername">Password:</label> <input class="inputs" id="inputPassword" type="password" name="password" placeholder="Add password"/><br/>
        <label class="labels" for="inputUsername">Confirm Password:</label> <input class="inputs" id="inputPassword2" type="password" name="password2" placeholder="Retype password"/><br/>
    </form>
    <button id="submit" value="Sign In">Sign In</button>
    <a href="/" >Back to login</a>
</span>


<h2>Our favorite games</h2>
<ul>
    <li><a href="/colorsudoku/new?difficulty=1">Colorsudoku</a></li>
</ul>

<div th:replace="fragments::footer"/>

<script>

    document.getElementById("inputUsername").addEventListener("click", function (){
        document.getElementById("inputUsername").style.borderColor = "none";
    });
    document.getElementById("inputPassword").addEventListener("click", function (){
        document.getElementById("inputPassword").style.borderColor = "none";
    });
    document.getElementById("inputPassword2").addEventListener("click", function (){
        document.getElementById("inputPassword2").style.borderColor = "none";
    });

    $(document).ready(function (){
        $("#submit").click(function (){
            let a = $('form').serializeArray();
            let username;
            let password;
            let password2;
            let error = false;
            $.each(a, function (i, field){
                if (field.name === "username" && i===0) {
                    username = field.value;
                    if (username === "") {
                        document.getElementById("inputUsername").style.borderColor = "red";
                        document.getElementById("inputUsername").placeholder = "Please fill username";
                        error = true;
                    }
                }
                if (field.name === "password" && i===1){
                    password = field.value;
                    if (password === ""){
                        document.getElementById("inputPassword").style.borderColor = "red";
                        document.getElementById("inputPassword").placeholder = "Please fill password";
                        error = true;
                    }
                }
                if (field.name === "password2") {
                    password2 = field.value;
                    if (password2 !== password){
                        document.getElementById("inputPassword2").style.borderColor = "red";
                        document.getElementById("inputPassword2").placeholder = "Please fill correct password";
                        error = true;
                    }
                }


                if (error === false){
                    document.myForm.submit();
                }

            });
        });
    });
</script>
</body>
</html>
